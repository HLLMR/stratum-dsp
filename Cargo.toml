[package]
name = "stratum-dsp"
version = "0.1.0"
edition = "2021"
authors = ["HLLMR"]
description = "Professional-grade audio analysis engine for DJ applications: BPM detection, key detection, and beat tracking"
license = "MIT OR Apache-2.0"
repository = "https://github.com/HLLMR/stratum-dsp"
keywords = ["audio", "dsp", "bpm", "key-detection", "beat-tracking", "dj"]
categories = ["multimedia::audio", "science::audio"]
readme = "README.md"

[dependencies]
# Audio I/O
symphonia = { version = "0.5", features = ["all"] }

# Math & DSP
ndarray = "0.15"
ndarray-linalg = "0.15"
rustfft = "6.2"

# ML (Phase 2, optional)
ort = { version = "2.0.0-rc.10", optional = true }

# Utilities
serde = { version = "1", features = ["derive"] }
serde_json = "1"
log = "0.4"
rayon = "1.8"

[dev-dependencies]
env_logger = "0.11"
criterion = { version = "0.5", features = ["html_reports"] }
hound = "3.5"  # WAV file reading for integration tests

[features]
default = []
ml = ["ort"]

[lib]
name = "stratum_dsp"
path = "src/lib.rs"

[[bench]]
name = "audio_analysis_bench"
harness = false

[profile.release]
opt-level = 3
lto = true
codegen-units = 1

[profile.dev]
opt-level = 0
debug = true

